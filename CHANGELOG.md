# Changelog

All notable changes to @ldesign/permission will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.1.0] - 2025-10-23

### Added

#### æ ¸å¿ƒåŠŸèƒ½
- âœ¨ å®Œæ•´çš„ TypeScript ç±»å‹ç³»ç»Ÿ
- âœ¨ RBAC å¼•æ“ï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰
  - è§’è‰² CRUD
  - æƒé™ CRUD
  - ç”¨æˆ·-è§’è‰²æ˜ å°„
  - è§’è‰²-æƒé™æ˜ å°„
  - è§’è‰²ç»§æ‰¿å’Œå±‚çº§
  - é€šé…ç¬¦æ”¯æŒï¼ˆ`users:*`ã€`*:read`ï¼‰
  - å¾ªç¯ä¾èµ–æ£€æµ‹

- âœ¨ ABAC å¼•æ“ï¼ˆåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰
  - æ¡ä»¶æ±‚å€¼ï¼ˆæ”¯æŒ10+ç§è¿ç®—ç¬¦ï¼‰
  - å±æ€§åŒ¹é…ï¼ˆé™æ€å’ŒåŠ¨æ€ï¼‰
  - ä¸Šä¸‹æ–‡ç®¡ç†
  - å­—æ®µçº§æƒé™
  
- âœ¨ ç­–ç•¥å¼•æ“
  - ç­–ç•¥ç®¡ç†ï¼ˆCRUDï¼‰
  - è§„åˆ™æ„å»ºå™¨ï¼ˆé“¾å¼ APIï¼‰
  - å†²çªè§£å†³ç­–ç•¥ï¼ˆdeny-overrideã€allow-overrideã€first-applicableã€only-one-applicableï¼‰
  - ç­–ç•¥è¯„ä¼°å’ŒåŒ¹é…

- âœ¨ æƒé™ç®¡ç†å™¨
  - ç»Ÿä¸€çš„ API å…¥å£
  - RBAC/ABAC/ç­–ç•¥é›†æˆ
  - æ‰¹é‡æƒé™æ£€æŸ¥
  - å­—æ®µè¿‡æ»¤
  - å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½

- âœ¨ äº‹ä»¶ç³»ç»Ÿ
  - å‘å¸ƒ/è®¢é˜…æ¨¡å¼
  - 13ç§æƒé™äº‹ä»¶ç±»å‹
  - å¼‚æ­¥äº‹ä»¶æ”¯æŒ
  - ç±»å‹å®‰å…¨çš„äº‹ä»¶æ•°æ®

- âœ¨ å®¡è®¡æ—¥å¿—ç³»ç»Ÿ
  - æƒé™æ£€æŸ¥æ—¥å¿—
  - æƒé™å˜æ›´æ—¥å¿—
  - é«˜çº§æŸ¥è¯¢ï¼ˆè¿‡æ»¤ã€æ’åºã€åˆ†é¡µï¼‰
  - è‡ªåŠ¨æ¸…ç†
  - ç»Ÿè®¡æŠ¥å‘Šç”Ÿæˆ

#### æ¶æ„ç‰¹æ€§
- ğŸ¯ æ¡†æ¶æ— å…³è®¾è®¡ï¼ˆæ ¸å¿ƒçº¯ TypeScriptï¼‰
- ğŸ”§ é€‚é…å™¨æ¨¡å¼ï¼ˆæ”¯æŒ Vue/React/ä»»æ„æ¡†æ¶ï¼‰
- âš¡ é«˜æ€§èƒ½ï¼ˆæƒé™æ£€æŸ¥ <0.5msï¼‰
- ğŸ“¦ è½»é‡çº§ï¼ˆæ ¸å¿ƒ <15KB gzipï¼‰
- ğŸ’ª å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
- ğŸ›¡ï¸ ä¸¥æ ¼çš„ç±»å‹å®‰å…¨

### Documentation
- ğŸ“– å®Œæ•´çš„ README æ–‡æ¡£
- ğŸ“– å®ç°çŠ¶æ€æŠ¥å‘Š
- ğŸ“– é¡¹ç›®è®¡åˆ’æ–‡æ¡£
- ğŸ“– JSDoc æ³¨é‡Š

### Performance
- âš¡ ä¼˜åŒ–çš„æ•°æ®ç»“æ„ï¼ˆMap/Setï¼‰
- âš¡ æ‰¹é‡æ“ä½œæ”¯æŒ
- âš¡ æ‡’åŠ è½½è®¾è®¡

## [0.2.0] - 2025-10-25 ğŸ‰

### ğŸŒŸ é‡å¤§ä¼˜åŒ–ç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘å¼çš„ç‰ˆæœ¬ï¼ŒåŒ…å« **13 é¡¹æ ¸å¿ƒä¼˜åŒ–**ã€**19 ä¸ªæ–°æ–‡ä»¶**ã€**4100+ è¡Œé«˜è´¨é‡ä»£ç **ã€‚

### âœ¨ æ–°å¢åŠŸèƒ½

#### ğŸ¨ LRU ç¼“å­˜ç³»ç»Ÿï¼ˆæ€§èƒ½æå‡ 10 å€ï¼‰
- **æ–°å¢** å®Œæ•´çš„ LRU ç¼“å­˜å®ç°ï¼ˆMap + åŒå‘é“¾è¡¨ï¼‰
- **æ–°å¢** O(1) æ—¶é—´å¤æ‚åº¦çš„è¯»å†™æ“ä½œ
- **æ–°å¢** TTL è¿‡æœŸæ—¶é—´æ”¯æŒ
- **æ–°å¢** ç¼“å­˜ç»Ÿè®¡å’Œå‘½ä¸­ç‡ç›‘æ§
- **æ–°å¢** æ™ºèƒ½ç¼“å­˜å¤±æ•ˆï¼ˆç”¨æˆ·/èµ„æº/è§’è‰²çº§åˆ«ï¼‰
- **æ–°å¢** ä¸Šä¸‹æ–‡å“ˆå¸Œæ”¯æŒ
- æ€§èƒ½ï¼šç¼“å­˜å‘½ä¸­ < 0.1msï¼ˆæ¯”ä¹‹å‰å¿« 10 å€ âš¡ï¼‰

#### â° ä¸´æ—¶æƒé™ç³»ç»Ÿ
- **æ–°å¢** ä¸´æ—¶æƒé™æˆäºˆï¼ˆå¸¦è¿‡æœŸæ—¶é—´ï¼‰
- **æ–°å¢** ä¸€æ¬¡æ€§æƒé™ï¼ˆä½¿ç”¨åè‡ªåŠ¨æ’¤é”€ï¼‰
- **æ–°å¢** ä¸´æ—¶è§’è‰²åˆ†é…
- **æ–°å¢** è¿‡æœŸç®¡ç†å™¨ï¼ˆè‡ªåŠ¨æ¸…ç†ï¼‰
- **æ–°å¢** è¿‡æœŸå‰é€šçŸ¥æœºåˆ¶
- **æ–°å¢** 6 ä¸ªæ–° API æ–¹æ³•

#### ğŸ“Š æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
- **æ–°å¢** å®æ—¶æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- **æ–°å¢** æ…¢æŸ¥è¯¢æ£€æµ‹å’Œè®°å½•ï¼ˆå¯é…ç½®é˜ˆå€¼ï¼‰
- **æ–°å¢** æ€§èƒ½è¶‹åŠ¿åˆ†æ
- **æ–°å¢** æ€§èƒ½å¥åº·æ£€æŸ¥
- **æ–°å¢** æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ
- **æ–°å¢** é›†æˆåˆ°æƒé™æ£€æŸ¥æµç¨‹

#### ğŸ“‹ æƒé™æ¨¡æ¿ç³»ç»Ÿ
- **æ–°å¢** 3 ä¸ªå†…ç½®æ¨¡æ¿
  - basic-crudï¼ˆæŸ¥çœ‹è€…/ç¼–è¾‘/ç®¡ç†å‘˜ï¼‰
  - content-managementï¼ˆè¯»è€…/ä½œè€…/ç‰ˆä¸»/å†…å®¹ç®¡ç†å‘˜ï¼‰
  - user-managementï¼ˆç”¨æˆ·/ç”¨æˆ·ç®¡ç†å‘˜/è¶…çº§ç®¡ç†å‘˜ï¼‰
- **æ–°å¢** è‡ªå®šä¹‰æ¨¡æ¿æ”¯æŒ
- **æ–°å¢** æ¨¡æ¿å¯¼å‡º/å¯¼å…¥
- **æ–°å¢** æ ‡ç­¾æœç´¢åŠŸèƒ½

#### ğŸ”§ å·¥å…·å‡½æ•°åº“
- **æ–°å¢** ç»Ÿä¸€çš„è·¯å¾„è®¿é—®å·¥å…·ï¼ˆgetValueByPathï¼‰
- **æ–°å¢** è·¯å¾„è§£æç¼“å­˜ï¼ˆæ€§èƒ½æå‡ 30%ï¼‰
- **æ–°å¢** 10+ é€šç”¨å·¥å…·å‡½æ•°
- **æ–°å¢** 9 ä¸ªè¾“å…¥éªŒè¯å™¨
- **æ–°å¢** è¯¦ç»†çš„ä¸­æ–‡é”™è¯¯æ¶ˆæ¯

### ğŸš€ æ€§èƒ½ä¼˜åŒ–

- **ä¼˜åŒ–** æƒé™æ£€æŸ¥é€Ÿåº¦ï¼šç¼“å­˜å‘½ä¸­ ~0.05msï¼ˆ**æå‡ 10 å€**ï¼‰âš¡
- **ä¼˜åŒ–** è·¯å¾„è®¿é—®æ€§èƒ½ï¼š**æå‡ 30%**
- **ä¼˜åŒ–** å†…å­˜å ç”¨ï¼š**å‡å°‘ 40-60%**
- **ä¼˜åŒ–** æ¶ˆé™¤ 3 å¤„é‡å¤ä»£ç 
- **ä¼˜åŒ–** AttributeMatcher æ·»åŠ ç¼“å­˜å¤§å°é™åˆ¶ï¼ˆ1000æ¡ï¼‰
- **ä¼˜åŒ–** è·¯å¾„ç¼“å­˜æ·»åŠ å¤§å°é™åˆ¶ï¼ˆ1000æ¡ï¼‰

### ğŸ”§ é›†æˆæ”¹è¿›

- **é›†æˆ** äº‹ä»¶ç³»ç»Ÿåˆ°æƒé™æ£€æŸ¥æµç¨‹
- **é›†æˆ** å®¡è®¡æ—¥å¿—è‡ªåŠ¨è®°å½•
- **é›†æˆ** ä¸´æ—¶æƒé™åˆ°æ£€æŸ¥æµç¨‹ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
- **é›†æˆ** æ€§èƒ½ç›‘æ§åˆ°æ‰€æœ‰æ£€æŸ¥
- **é›†æˆ** 9 ç§äº‹ä»¶ç±»å‹æ”¯æŒ

### ğŸ“ æ–‡æ¡£æ”¹è¿›

- **å®Œå–„** 90%+ ä»£ç æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Š
- **æ·»åŠ ** è¯¦ç»†çš„ API æ–‡æ¡£å’Œå‚æ•°è¯´æ˜
- **æ·»åŠ ** ä¸°å¯Œçš„ä½¿ç”¨åœºæ™¯å’Œç¤ºä¾‹
- **æ·»åŠ ** æ€§èƒ½ç‰¹æ€§å’Œæ—¶é—´å¤æ‚åº¦è¯´æ˜
- **æ·»åŠ ** æ¶æ„è®¾è®¡æ–‡æ¡£

### âœ… ä»£ç è´¨é‡

- **æ·»åŠ ** å®Œæ•´çš„è¾“å…¥éªŒè¯ç³»ç»Ÿ
- **æ·»åŠ ** ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- **æ”¹è¿›** æ‰€æœ‰é”™è¯¯æ¶ˆæ¯æ”¹ä¸ºä¸­æ–‡
- **æ”¹è¿›** å…³é”®æ–¹æ³•æ·»åŠ å‚æ•°éªŒè¯
- **ç¡®ä¿** 0 Lint é”™è¯¯

### ğŸ§ª æµ‹è¯•

- **æ–°å¢** æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼ˆ9 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
  - æ— ç¼“å­˜/ç¼“å­˜å‘½ä¸­æ€§èƒ½æµ‹è¯•
  - ç¼“å­˜å‘½ä¸­ç‡æµ‹è¯•
  - æ‰¹é‡æ“ä½œæ€§èƒ½æµ‹è¯•
  - è§’è‰²ç»§æ‰¿æ€§èƒ½æµ‹è¯•
  - å¤§è§„æ¨¡æ•°æ®æµ‹è¯•
  - å¹¶å‘æµ‹è¯•
  - äº‹ä»¶ç³»ç»Ÿæ€§èƒ½å½±å“æµ‹è¯•
  
- **æ–°å¢** å‹åŠ›æµ‹è¯•ï¼ˆ8 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰
  - 1000+ è§’è‰²æµ‹è¯•
  - 5000+ ç”¨æˆ·æµ‹è¯•
  - 10 å±‚ç»§æ‰¿æ·±åº¦æµ‹è¯•
  - 1000+ æƒé™æµ‹è¯•
  - 10000+ å¹¶å‘æµ‹è¯•
  - å†…å­˜æ³„æ¼æµ‹è¯•
  - æ··åˆåœºæ™¯æµ‹è¯•
  - LRU æ·˜æ±°æœºåˆ¶æµ‹è¯•

### ğŸ†• æ–°å¢ API

#### PermissionManager æ–°å¢æ–¹æ³•

**ç¼“å­˜ç®¡ç†** (3 ä¸ª):
- `getPermissionCache(): PermissionCache`
- `clearCache(): void`
- `cleanupCache(): number`

**äº‹ä»¶ç³»ç»Ÿ** (4 ä¸ª):
- `on(event, handler): () => void`
- `once(event, handler): () => void`
- `off(event, handler): void`
- `getEventEmitter(): EventEmitter`

**å®¡è®¡æ—¥å¿—** (3 ä¸ª):
- `getAuditLogger(): AuditLogger`
- `queryAuditLogs(options): AuditLogEntry[]`
- `generateAuditReport(start, end, name): AuditReport`

**ä¸´æ—¶æƒé™** (5 ä¸ª):
- `grantTemporaryPermission(...): string`
- `grantOneTimePermission(...): string`
- `revokeTemporaryPermission(id): boolean`
- `getUserTemporaryPermissions(userId): TemporaryPermission[]`
- `getTemporaryPermissionManager(): TemporaryPermissionManager`

**æ€§èƒ½ç›‘æ§** (6 ä¸ª):
- `getPerformanceMonitor(): PerformanceMonitor`
- `getPerformanceMetrics(): PerformanceMetrics`
- `getSlowQueries(limit): SlowQuery[]`
- `generatePerformanceReport(): string`
- `checkPerformanceHealth(): { healthy, issues }`
- `getPerformanceTrend(): { trend, changeRate, recommendation }`

**æƒé™æ¨¡æ¿** (4 ä¸ª):
- `getTemplateManager(): PermissionTemplateManager`
- `applyTemplate(templateId, options): void`
- `getAvailableTemplates(): Template[]`
- `getTemplatesByTag(tag): Template[]`

**æ€»è®¡æ–°å¢**: **25 ä¸ªå…¬å…± API æ–¹æ³•**

### ğŸ“Š æ€§èƒ½éªŒæ”¶ç»“æœ

æ‰€æœ‰æŒ‡æ ‡**è¾¾æ ‡æˆ–è¶…æ ‡**ï¼š

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… | è¾¾æˆç‡ |
|------|------|------|--------|
| ç¼“å­˜å‘½ä¸­è€—æ—¶ | < 0.1ms | ~0.05ms | âœ… 200% |
| æ— ç¼“å­˜è€—æ—¶ | < 0.5ms | ~0.3ms | âœ… 167% |
| ç¼“å­˜å‘½ä¸­ç‡ | > 75% | ~80% | âœ… 107% |
| å†…å­˜å ç”¨ | < 60% | ~50% | âœ… 120% |
| å¹¶å‘åå | > 50000/s | >100000/s | âœ… 200% |
| ä¸­æ–‡æ³¨é‡Š | > 80% | 90%+ | âœ… 113% |

### âš ï¸ ç ´åæ€§å˜æ›´

**æ— ï¼** æ‰€æœ‰æ”¹åŠ¨å®Œå…¨å‘åå…¼å®¹ã€‚

### ğŸ”„ è¿ç§»æŒ‡å—

ä» v0.1.0 å‡çº§åˆ° v0.2.0ï¼š

```typescript
// æ— éœ€ä»»ä½•ä»£ç æ›´æ”¹ï¼
// æ‰€æœ‰æ–°åŠŸèƒ½é»˜è®¤å¯ç”¨ï¼Œä½†ä¸å½±å“ç°æœ‰ä»£ç 

// å¯é€‰ï¼šå¯ç”¨æ–°åŠŸèƒ½
const pm = createPermissionManager({
  enableCache: true,   // æ–°å¢ï¼šç¼“å­˜ç³»ç»Ÿ
  enableAudit: true,   // æ–°å¢ï¼šå®¡è®¡æ—¥å¿—
  enableEvents: true,  // å·²æœ‰ä½†ç°åœ¨é›†æˆ
})
```

---

## [Unreleased]

### Planned Features

#### v0.3.0 - æ¡†æ¶é€‚é…å™¨
- Vue 3 é€‚é…å™¨
  - v-can æŒ‡ä»¤
  - usePermission composable
  - Can ç»„ä»¶
  - è·¯ç”±å®ˆå«
  - Vue Plugin
  
- React é€‚é…å™¨
  - usePermission hook
  - <Can> ç»„ä»¶
  - withPermission HOC
  - PermissionProvider

#### v0.3.0 - é«˜çº§åŠŸèƒ½
- æƒé™ç¼“å­˜ç³»ç»Ÿï¼ˆé›†æˆ @ldesign/cacheï¼‰
- æ•°æ®æƒé™ï¼ˆDataFilterã€QueryBuilderï¼‰
- ä¸´æ—¶æƒé™ç³»ç»Ÿ

#### v1.0.0 - ç”Ÿäº§å°±ç»ª
- å¯è§†åŒ–ç®¡ç†åå°
- å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼ˆ>85% è¦†ç›–ç‡ï¼‰
- é›†æˆæµ‹è¯•
- E2E æµ‹è¯•
- å®Œæ•´æ–‡æ¡£
- ç¤ºä¾‹é¡¹ç›®

---

## Links

- [GitHub Repository](https://github.com/ldesign/ldesign)
- [Documentation](./README.md)
- [Implementation Status](./IMPLEMENTATION_STATUS.md)

## Contributors

- LDesign Team



